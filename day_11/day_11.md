# Displaying Text (using TI)

#### Text Position

There are two coordinate systems: cursor coordinates and pen coordinates. The large and small fonts use these, respectively. The 83+ has 64x96 pixel display, for the cursor coordinates this is divided into 8x6 blocks, giving a coordinate system in [8]x[16]. The pen coordinates are in [64]x[96].

#### Large Font

`_PutMap` displays an ASCII character in `A` at the current _cursor position_.
`_PutC` is like `_PutMap`, but the cursor is _advanced_.

```
    LD     A, 3
    LD     (CurRow), A    ; Set row 3
    LD     A, 4
    LD     (CurCol), A    ; Set column 4
    LD     A, 'I'         ; Use a character constant instead of
    bcall(_PutC)        ; giving a cryptic ASCII code.
    RET
```

Note that `CurCol` is immediately after `CurRow`, so sufficient to store `$0403` into `(CurRow)`.

```
    LD     HL, 4*256+3    ; Could also be $0403
    LD     (CurRow), HL   ; Set coordinates
    LD     A, 'I'
    bcall(_PutC)
    RET
```

`_NewLine` moves cursor to start of next line and `_HomeUp` resets cursor (0,0).

#### Displaying Strings

This is the standard procedure.

```
    ; Set up the cursor coordinates here
    LD    HL, text    ;This loads our pointer to the string.
    bcall(_PutS)
    .
    .
    .
    RET
text:
    .DB    "A message to display", 0
```

Reminder that `text` is just an alias for the program counter for the subsequently generated bytes. In this case, `text` is the location in memory where `A` will be stored.

#### Small Font

Use `_VPutMap` and `_VPutS` as above, except we have `PenRow` and `PenCol`.

#### Numbers

Can simply use `_DispHL` to display the contents of HL in a right-justified field of five characters.

#### Text Shadow

TextShadow is a 128-byte block that stores every character written in the large font (8*16 = 128). The primary purpose is to save the home screen between menus. The routrine `_ClrScrnFull`  clears the screen and sets text shadow to all spaces, while `_ClrTxtShd` just clears the text shadow. We can also just turn off the system flag `AppTextSave` at `(IY+AppFlags)`.

#### Miscellanious

If `TextInverse` at `(IY+TextFlags)` is set, text will applear white on black.
If `FracDrawLFont` at `(IY+FontFlags)` is set, any routine using small font will instead use large font.
If `AppAutoScroll` at `(IY+AppFlags)` is set, display will not scroll when `(CurRow)` exceeds 7.